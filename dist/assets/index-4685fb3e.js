import{ah as V,aj as nt,k as S,an as X,ao as $,aG as Q,aH as at,n as st,aI as it,aJ as rt,aK as ct,aL as U,aM as ot,s as q,aN as ut,aa as m,aO as K}from"./index-a3470178.js";class dt extends V{constructor({domain:t}){super(`Invalid domain "${nt(t)}".`,{metaMessages:["Must be a valid EIP-712 domain."]})}}class lt extends V{constructor({primaryType:t,types:n}){super(`Invalid primary type \`${t}\` must be one of \`${JSON.stringify(Object.keys(n))}\`.`,{docsPath:"/api/glossary/Errors#typeddatainvalidprimarytypeerror",metaMessages:["Check that the primary type is a key in `types`."]})}}class ft extends V{constructor({type:t}){super(`Struct type "${t}" is invalid.`,{metaMessages:["Struct type must not be a Solidity type."],name:"InvalidStructTypeError"})}}function gt(e){const{domain:t={},message:n,primaryType:a}=e,c={EIP712Domain:It({domain:t}),...e.types};_t({domain:t,message:n,primaryType:a,types:c});const s=["0x1901"];return t&&s.push(ht({domain:t,types:c})),a!=="EIP712Domain"&&s.push(z({data:n,primaryType:a,types:c})),S(X(s))}function ht({domain:e,types:t}){return z({data:e,primaryType:"EIP712Domain",types:t})}function z({data:e,primaryType:t,types:n}){const a=J({data:e,primaryType:t,types:n});return S(a)}function J({data:e,primaryType:t,types:n}){const a=[{type:"bytes32"}],c=[Et({primaryType:t,types:n})];for(const s of n[t]){const[u,l]=Z({types:n,name:s.name,type:s.type,value:e[s.name]});a.push(u),c.push(l)}return $(a,c)}function Et({primaryType:e,types:t}){const n=Q(Tt({primaryType:e,types:t}));return S(n)}function Tt({primaryType:e,types:t}){let n="";const a=Y({primaryType:e,types:t});a.delete(e);const c=[e,...Array.from(a).sort()];for(const s of c)n+=`${s}(${t[s].map(({name:u,type:l})=>`${l} ${u}`).join(",")})`;return n}function Y({primaryType:e,types:t},n=new Set){const a=e.match(/^\w*/u),c=a==null?void 0:a[0];if(n.has(c)||t[c]===void 0)return n;n.add(c);for(const s of t[c])Y({primaryType:s.type,types:t},n);return n}function Z({types:e,name:t,type:n,value:a}){if(e[n]!==void 0)return[{type:"bytes32"},S(J({data:a,primaryType:n,types:e}))];if(n==="bytes")return a=`0x${(a.length%2?"0":"")+a.slice(2)}`,[{type:"bytes32"},S(a)];if(n==="string")return[{type:"bytes32"},S(Q(a))];if(n.lastIndexOf("]")===n.length-1){const c=n.slice(0,n.lastIndexOf("[")),s=a.map(u=>Z({name:t,type:c,types:e,value:u}));return[{type:"bytes32"},S($(s.map(([u])=>u),s.map(([,u])=>u)))]}return[{type:n},a]}function _t(e){const{domain:t,message:n,primaryType:a,types:c}=e,s=(u,l)=>{for(const h of u){const{name:A,type:f}=h,E=l[A],C=f.match(at);if(C&&(typeof E=="number"||typeof E=="bigint")){const[B,N,H]=C;st(E,{signed:N==="int",size:Number.parseInt(H)/8})}if(f==="address"&&typeof E=="string"&&!it(E))throw new rt({address:E});const R=f.match(ct);if(R){const[B,N]=R;if(N&&U(E)!==Number.parseInt(N))throw new ot({expectedSize:Number.parseInt(N),givenSize:U(E)})}const P=c[f];P&&(yt(f),s(P,E))}};if(c.EIP712Domain&&t){if(typeof t!="object")throw new dt({domain:t});s(c.EIP712Domain,t)}if(a!=="EIP712Domain")if(c[a])s(c[a],n);else throw new lt({primaryType:a,types:c})}function It({domain:e}){return[typeof(e==null?void 0:e.name)=="string"&&{name:"name",type:"string"},(e==null?void 0:e.version)&&{name:"version",type:"string"},(typeof(e==null?void 0:e.chainId)=="number"||typeof(e==null?void 0:e.chainId)=="bigint")&&{name:"chainId",type:"uint256"},(e==null?void 0:e.verifyingContract)&&{name:"verifyingContract",type:"address"},(e==null?void 0:e.salt)&&{name:"salt",type:"bytes32"}].filter(Boolean)}function yt(e){if(e==="address"||e==="bool"||e==="string"||e.startsWith("bytes")||e.startsWith("uint")||e.startsWith("int"))throw new ft({type:e})}const At=`Ethereum Signed Message:
`;function vt(e){const t=(()=>typeof e=="string"?q(e):typeof e.raw=="string"?e.raw:ut(e.raw))(),n=q(`${At}${U(t)}`);return X([n,t])}function St(e,t){return S(vt(e),t)}const x=()=>"9.1.0",Nt=e=>e.toString(16).padStart(2,"0"),Ot=e=>{const t=new Uint8Array((e||40)/2);return window.crypto.getRandomValues(t),Array.from(t,Nt).join("")},mt=()=>typeof window<"u"?Ot(10):new Date().getTime().toString(36);class p{}p.makeRequest=(e,t)=>({id:mt(),method:e,params:t,env:{sdkVersion:x()}});p.makeResponse=(e,t,n)=>({id:e,success:!0,version:n,data:t});p.makeErrorResponse=(e,t,n)=>({id:e,success:!1,error:t,version:n});var g;(function(e){e.sendTransactions="sendTransactions",e.rpcCall="rpcCall",e.getChainInfo="getChainInfo",e.getSafeInfo="getSafeInfo",e.getTxBySafeTxHash="getTxBySafeTxHash",e.getSafeBalances="getSafeBalances",e.signMessage="signMessage",e.signTypedMessage="signTypedMessage",e.getEnvironmentInfo="getEnvironmentInfo",e.getOffChainSignature="getOffChainSignature",e.requestAddressBook="requestAddressBook",e.wallet_getPermissions="wallet_getPermissions",e.wallet_requestPermissions="wallet_requestPermissions"})(g||(g={}));var w;(function(e){e.requestAddressBook="requestAddressBook"})(w||(w={}));class Dt{constructor(t=null,n=!1){this.allowedOrigins=null,this.callbacks=new Map,this.debugMode=!1,this.isServer=typeof window>"u",this.isValidMessage=({origin:a,data:c,source:s})=>{const u=!c,l=!this.isServer&&s===window.parent,h=typeof c.version<"u"&&parseInt(c.version.split(".")[0]),A=typeof h=="number"&&h>=1;let f=!0;return Array.isArray(this.allowedOrigins)&&(f=this.allowedOrigins.find(E=>E.test(a))!==void 0),!u&&l&&A&&f},this.logIncomingMessage=a=>{console.info(`Safe Apps SDK v1: A message was received from origin ${a.origin}. `,a.data)},this.onParentMessage=a=>{this.isValidMessage(a)&&(this.debugMode&&this.logIncomingMessage(a),this.handleIncomingMessage(a.data))},this.handleIncomingMessage=a=>{const{id:c}=a,s=this.callbacks.get(c);s&&(s(a),this.callbacks.delete(c))},this.send=(a,c)=>{const s=p.makeRequest(a,c);if(this.isServer)throw new Error("Window doesn't exist");return window.parent.postMessage(s,"*"),new Promise((u,l)=>{this.callbacks.set(s.id,h=>{if(!h.success){l(new Error(h.error));return}u(h)})})},this.allowedOrigins=t,this.debugMode=n,this.isServer||window.addEventListener("message",this.onParentMessage)}}const W=e=>typeof e=="object"&&e!=null&&"domain"in e&&"types"in e&&"message"in e;var D={},I={},y={},k=m&&m.__awaiter||function(e,t,n,a){function c(s){return s instanceof n?s:new n(function(u){u(s)})}return new(n||(n=Promise))(function(s,u){function l(f){try{A(a.next(f))}catch(E){u(E)}}function h(f){try{A(a.throw(f))}catch(E){u(E)}}function A(f){f.done?s(f.value):c(f.value).then(l,h)}A((a=a.apply(e,t||[])).next())})};Object.defineProperty(y,"__esModule",{value:!0});y.getData=y.fetchData=y.stringifyQuery=y.insertParams=void 0;const bt=e=>typeof e=="object"&&e!==null&&"code"in e&&"message"in e;function pt(e,t,n){return e.replace(new RegExp(`\\{${t}\\}`,"g"),n)}function Ct(e,t){return t?Object.keys(t).reduce((n,a)=>pt(n,a,String(t[a])),e):e}y.insertParams=Ct;function Rt(e){if(!e)return"";const t=new URLSearchParams;Object.keys(e).forEach(a=>{e[a]!=null&&t.append(a,String(e[a]))});const n=t.toString();return n?`?${n}`:""}y.stringifyQuery=Rt;function ee(e){return k(this,void 0,void 0,function*(){let t;try{t=yield e.json()}catch{t={}}if(!e.ok){const n=bt(t)?`CGW error - ${t.code}: ${t.message}`:`CGW error - status ${e.statusText}`;throw new Error(n)}return t})}function Pt(e,t,n,a,c){return k(this,void 0,void 0,function*(){const s=Object.assign({"Content-Type":"application/json"},a),u={method:t??"POST",headers:s};c&&(u.credentials=c),n!=null&&(u.body=typeof n=="string"?n:JSON.stringify(n));const l=yield fetch(e,u);return ee(l)})}y.fetchData=Pt;function wt(e,t,n){return k(this,void 0,void 0,function*(){const a={method:"GET"};t&&(a.headers=Object.assign(Object.assign({},t),{"Content-Type":"application/json"})),n&&(a.credentials=n);const c=yield fetch(e,a);return ee(c)})}y.getData=wt;Object.defineProperty(I,"__esModule",{value:!0});I.getEndpoint=I.deleteEndpoint=I.putEndpoint=I.postEndpoint=void 0;const O=y;function M(e,t,n,a){const c=(0,O.insertParams)(t,n),s=(0,O.stringifyQuery)(a);return`${e}${c}${s}`}function Mt(e,t,n){const a=M(e,t,n==null?void 0:n.path,n==null?void 0:n.query);return(0,O.fetchData)(a,"POST",n==null?void 0:n.body,n==null?void 0:n.headers,n==null?void 0:n.credentials)}I.postEndpoint=Mt;function Lt(e,t,n){const a=M(e,t,n==null?void 0:n.path,n==null?void 0:n.query);return(0,O.fetchData)(a,"PUT",n==null?void 0:n.body,n==null?void 0:n.headers,n==null?void 0:n.credentials)}I.putEndpoint=Lt;function Bt(e,t,n){const a=M(e,t,n==null?void 0:n.path,n==null?void 0:n.query);return(0,O.fetchData)(a,"DELETE",n==null?void 0:n.body,n==null?void 0:n.headers,n==null?void 0:n.credentials)}I.deleteEndpoint=Bt;function Ht(e,t,n,a){if(a)return(0,O.getData)(a,void 0,n==null?void 0:n.credentials);const c=M(e,t,n==null?void 0:n.path,n==null?void 0:n.query);return(0,O.getData)(c,n==null?void 0:n.headers,n==null?void 0:n.credentials)}I.getEndpoint=Ht;var L={};Object.defineProperty(L,"__esModule",{value:!0});L.DEFAULT_BASE_URL=void 0;L.DEFAULT_BASE_URL="https://safe-client.safe.global";var te={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.ImplementationVersionState=void 0,function(t){t.UP_TO_DATE="UP_TO_DATE",t.OUTDATED="OUTDATED",t.UNKNOWN="UNKNOWN"}(e.ImplementationVersionState||(e.ImplementationVersionState={}))})(te);var ne={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeAppSocialPlatforms=e.SafeAppFeatures=e.SafeAppAccessPolicyTypes=void 0,function(t){t.NoRestrictions="NO_RESTRICTIONS",t.DomainAllowlist="DOMAIN_ALLOWLIST"}(e.SafeAppAccessPolicyTypes||(e.SafeAppAccessPolicyTypes={})),function(t){t.BATCHED_TRANSACTIONS="BATCHED_TRANSACTIONS"}(e.SafeAppFeatures||(e.SafeAppFeatures={})),function(t){t.TWITTER="TWITTER",t.GITHUB="GITHUB",t.DISCORD="DISCORD",t.TELEGRAM="TELEGRAM"}(e.SafeAppSocialPlatforms||(e.SafeAppSocialPlatforms={}))})(ne);var ae={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.LabelValue=e.StartTimeValue=e.DurationType=e.DetailedExecutionInfoType=e.TransactionListItemType=e.ConflictType=e.TransactionInfoType=e.SettingsInfoType=e.TransactionTokenType=e.TransferDirection=e.TransactionStatus=e.Operation=void 0,function(t){t[t.CALL=0]="CALL",t[t.DELEGATE=1]="DELEGATE"}(e.Operation||(e.Operation={})),function(t){t.AWAITING_CONFIRMATIONS="AWAITING_CONFIRMATIONS",t.AWAITING_EXECUTION="AWAITING_EXECUTION",t.CANCELLED="CANCELLED",t.FAILED="FAILED",t.SUCCESS="SUCCESS"}(e.TransactionStatus||(e.TransactionStatus={})),function(t){t.INCOMING="INCOMING",t.OUTGOING="OUTGOING",t.UNKNOWN="UNKNOWN"}(e.TransferDirection||(e.TransferDirection={})),function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_COIN="NATIVE_COIN"}(e.TransactionTokenType||(e.TransactionTokenType={})),function(t){t.SET_FALLBACK_HANDLER="SET_FALLBACK_HANDLER",t.ADD_OWNER="ADD_OWNER",t.REMOVE_OWNER="REMOVE_OWNER",t.SWAP_OWNER="SWAP_OWNER",t.CHANGE_THRESHOLD="CHANGE_THRESHOLD",t.CHANGE_IMPLEMENTATION="CHANGE_IMPLEMENTATION",t.ENABLE_MODULE="ENABLE_MODULE",t.DISABLE_MODULE="DISABLE_MODULE",t.SET_GUARD="SET_GUARD",t.DELETE_GUARD="DELETE_GUARD"}(e.SettingsInfoType||(e.SettingsInfoType={})),function(t){t.TRANSFER="Transfer",t.SETTINGS_CHANGE="SettingsChange",t.CUSTOM="Custom",t.CREATION="Creation",t.SWAP_ORDER="SwapOrder",t.TWAP_ORDER="TwapOrder",t.SWAP_TRANSFER="SwapTransfer",t.NATIVE_STAKING_DEPOSIT="NativeStakingDeposit",t.NATIVE_STAKING_VALIDATORS_EXIT="NativeStakingValidatorsExit",t.NATIVE_STAKING_WITHDRAW="NativeStakingWithdraw"}(e.TransactionInfoType||(e.TransactionInfoType={})),function(t){t.NONE="None",t.HAS_NEXT="HasNext",t.END="End"}(e.ConflictType||(e.ConflictType={})),function(t){t.TRANSACTION="TRANSACTION",t.LABEL="LABEL",t.CONFLICT_HEADER="CONFLICT_HEADER",t.DATE_LABEL="DATE_LABEL"}(e.TransactionListItemType||(e.TransactionListItemType={})),function(t){t.MULTISIG="MULTISIG",t.MODULE="MODULE"}(e.DetailedExecutionInfoType||(e.DetailedExecutionInfoType={})),function(t){t.AUTO="AUTO",t.LIMIT_DURATION="LIMIT_DURATION"}(e.DurationType||(e.DurationType={})),function(t){t.AT_MINING_TIME="AT_MINING_TIME",t.AT_EPOCH="AT_EPOCH"}(e.StartTimeValue||(e.StartTimeValue={})),function(t){t.Queued="Queued",t.Next="Next"}(e.LabelValue||(e.LabelValue={}))})(ae);var se={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.FEATURES=e.GAS_PRICE_TYPE=e.RPC_AUTHENTICATION=void 0,function(t){t.API_KEY_PATH="API_KEY_PATH",t.NO_AUTHENTICATION="NO_AUTHENTICATION",t.UNKNOWN="UNKNOWN"}(e.RPC_AUTHENTICATION||(e.RPC_AUTHENTICATION={})),function(t){t.ORACLE="ORACLE",t.FIXED="FIXED",t.FIXED_1559="FIXED1559",t.UNKNOWN="UNKNOWN"}(e.GAS_PRICE_TYPE||(e.GAS_PRICE_TYPE={})),function(t){t.ERC721="ERC721",t.SAFE_APPS="SAFE_APPS",t.CONTRACT_INTERACTION="CONTRACT_INTERACTION",t.DOMAIN_LOOKUP="DOMAIN_LOOKUP",t.SPENDING_LIMIT="SPENDING_LIMIT",t.EIP1559="EIP1559",t.SAFE_TX_GAS_OPTIONAL="SAFE_TX_GAS_OPTIONAL",t.TX_SIMULATION="TX_SIMULATION",t.EIP1271="EIP1271"}(e.FEATURES||(e.FEATURES={}))})(se);var ie={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.TokenType=void 0,function(t){t.ERC20="ERC20",t.ERC721="ERC721",t.NATIVE_TOKEN="NATIVE_TOKEN",t.UNKNOWN="UNKNOWN"}(e.TokenType||(e.TokenType={}))})(ie);var re={};Object.defineProperty(re,"__esModule",{value:!0});var ce={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.NativeStakingStatus=e.ConfirmationViewTypes=void 0,function(t){t.GENERIC="GENERIC",t.COW_SWAP_ORDER="COW_SWAP_ORDER",t.COW_SWAP_TWAP_ORDER="COW_SWAP_TWAP_ORDER",t.KILN_NATIVE_STAKING_DEPOSIT="KILN_NATIVE_STAKING_DEPOSIT",t.KILN_NATIVE_STAKING_VALIDATORS_EXIT="KILN_NATIVE_STAKING_VALIDATORS_EXIT",t.KILN_NATIVE_STAKING_WITHDRAW="KILN_NATIVE_STAKING_WITHDRAW"}(e.ConfirmationViewTypes||(e.ConfirmationViewTypes={})),function(t){t.NOT_STAKED="NOT_STAKED",t.ACTIVATING="ACTIVATING",t.DEPOSIT_IN_PROGRESS="DEPOSIT_IN_PROGRESS",t.ACTIVE="ACTIVE",t.EXIT_REQUESTED="EXIT_REQUESTED",t.EXITING="EXITING",t.EXITED="EXITED",t.SLASHED="SLASHED"}(e.NativeStakingStatus||(e.NativeStakingStatus={}))})(ce);var oe={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.SafeMessageStatus=e.SafeMessageListItemType=void 0,function(t){t.DATE_LABEL="DATE_LABEL",t.MESSAGE="MESSAGE"}(e.SafeMessageListItemType||(e.SafeMessageListItemType={})),function(t){t.NEEDS_CONFIRMATION="NEEDS_CONFIRMATION",t.CONFIRMED="CONFIRMED"}(e.SafeMessageStatus||(e.SafeMessageStatus={}))})(oe);var ue={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.DeviceType=void 0,function(t){t.ANDROID="ANDROID",t.IOS="IOS",t.WEB="WEB"}(e.DeviceType||(e.DeviceType={}))})(ue);var de={};Object.defineProperty(de,"__esModule",{value:!0});(function(e){var t=m&&m.__createBinding||(Object.create?function(i,r,o,d){d===void 0&&(d=o);var _=Object.getOwnPropertyDescriptor(r,o);(!_||("get"in _?!r.__esModule:_.writable||_.configurable))&&(_={enumerable:!0,get:function(){return r[o]}}),Object.defineProperty(i,d,_)}:function(i,r,o,d){d===void 0&&(d=o),i[d]=r[o]}),n=m&&m.__exportStar||function(i,r){for(var o in i)o!=="default"&&!Object.prototype.hasOwnProperty.call(r,o)&&t(r,i,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.getAccount=e.createAccount=e.verifyAuth=e.getAuthNonce=e.getContract=e.getSafeOverviews=e.unsubscribeAll=e.unsubscribeSingle=e.registerRecoveryModule=e.deleteRegisteredEmail=e.getRegisteredEmail=e.verifyEmail=e.resendEmailVerificationCode=e.changeEmail=e.registerEmail=e.unregisterDevice=e.unregisterSafe=e.registerDevice=e.getDelegates=e.confirmSafeMessage=e.proposeSafeMessage=e.getSafeMessage=e.getSafeMessages=e.getDecodedData=e.getMasterCopies=e.getSafeApps=e.getChainConfig=e.getChainsConfig=e.getTxPreview=e.getConfirmationView=e.proposeTransaction=e.getNonces=e.postSafeGasEstimation=e.deleteTransaction=e.getTransactionDetails=e.getTransactionQueue=e.getTransactionHistory=e.getCollectiblesPage=e.getCollectibles=e.getAllOwnedSafes=e.getOwnedSafes=e.getFiatCurrencies=e.getBalances=e.getMultisigTransactions=e.getModuleTransactions=e.getIncomingTransfers=e.getSafeInfo=e.getRelayCount=e.relayTransaction=e.setBaseUrl=void 0,e.getIndexingStatus=e.putAccountDataSettings=e.getAccountDataSettings=e.getAccountDataTypes=e.deleteAccount=void 0;const a=I,c=L;n(te,e),n(ne,e),n(ae,e),n(se,e),n(ie,e),n(re,e),n(ce,e),n(oe,e),n(ue,e),n(de,e);let s=c.DEFAULT_BASE_URL;const u=i=>{s=i};e.setBaseUrl=u;function l(i,r){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/relay",{path:{chainId:i},body:r})}e.relayTransaction=l;function h(i,r){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/relay/{address}",{path:{chainId:i,address:r}})}e.getRelayCount=h;function A(i,r){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}",{path:{chainId:i,address:r}})}e.getSafeInfo=A;function f(i,r,o,d){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/incoming-transfers/",{path:{chainId:i,address:r},query:o},d)}e.getIncomingTransfers=f;function E(i,r,o,d){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/module-transactions/",{path:{chainId:i,address:r},query:o},d)}e.getModuleTransactions=E;function C(i,r,o,d){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/multisig-transactions/",{path:{chainId:i,address:r},query:o},d)}e.getMultisigTransactions=C;function R(i,r,o="usd",d={}){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/balances/{currency}",{path:{chainId:i,address:r,currency:o},query:d})}e.getBalances=R;function P(){return(0,a.getEndpoint)(s,"/v1/balances/supported-fiat-codes")}e.getFiatCurrencies=P;function B(i,r){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/owners/{address}/safes",{path:{chainId:i,address:r}})}e.getOwnedSafes=B;function N(i){return(0,a.getEndpoint)(s,"/v1/owners/{address}/safes",{path:{address:i}})}e.getAllOwnedSafes=N;function H(i,r,o={}){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:i,address:r},query:o})}e.getCollectibles=H;function ge(i,r,o={},d){return(0,a.getEndpoint)(s,"/v2/chains/{chainId}/safes/{address}/collectibles",{path:{chainId:i,address:r},query:o},d)}e.getCollectiblesPage=ge;function he(i,r,o={},d){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/transactions/history",{path:{chainId:i,safe_address:r},query:o},d)}e.getTransactionHistory=he;function Ee(i,r,o={},d){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/transactions/queued",{path:{chainId:i,safe_address:r},query:o},d)}e.getTransactionQueue=Ee;function Te(i,r){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/transactions/{transactionId}",{path:{chainId:i,transactionId:r}})}e.getTransactionDetails=Te;function _e(i,r,o){return(0,a.deleteEndpoint)(s,"/v1/chains/{chainId}/transactions/{safeTxHash}",{path:{chainId:i,safeTxHash:r},body:{signature:o}})}e.deleteTransaction=_e;function Ie(i,r,o){return(0,a.postEndpoint)(s,"/v2/chains/{chainId}/safes/{safe_address}/multisig-transactions/estimations",{path:{chainId:i,safe_address:r},body:o})}e.postSafeGasEstimation=Ie;function ye(i,r){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/nonces",{path:{chainId:i,safe_address:r}})}e.getNonces=ye;function Ae(i,r,o){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/transactions/{safe_address}/propose",{path:{chainId:i,safe_address:r},body:o})}e.proposeTransaction=Ae;function ve(i,r,o,d,_,G){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/views/transaction-confirmation",{path:{chainId:i,safe_address:r},body:{operation:o,data:d,to:_,value:G}})}e.getConfirmationView=ve;function Se(i,r,o,d,_,G){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/transactions/{safe_address}/preview",{path:{chainId:i,safe_address:r},body:{operation:o,data:d,to:_,value:G}})}e.getTxPreview=Se;function Ne(i){return(0,a.getEndpoint)(s,"/v1/chains",{query:i})}e.getChainsConfig=Ne;function Oe(i){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}",{path:{chainId:i}})}e.getChainConfig=Oe;function me(i,r={}){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safe-apps",{path:{chainId:i},query:r})}e.getSafeApps=me;function De(i){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/about/master-copies",{path:{chainId:i}})}e.getMasterCopies=De;function be(i,r,o,d){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/data-decoder",{path:{chainId:i},body:{operation:r,data:o,to:d}})}e.getDecodedData=be;function pe(i,r,o){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:i,safe_address:r},query:{}},o)}e.getSafeMessages=pe;function Ce(i,r){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/messages/{message_hash}",{path:{chainId:i,message_hash:r}})}e.getSafeMessage=Ce;function Re(i,r,o){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/messages",{path:{chainId:i,safe_address:r},body:o})}e.proposeSafeMessage=Re;function Pe(i,r,o){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/messages/{message_hash}/signatures",{path:{chainId:i,message_hash:r},body:o})}e.confirmSafeMessage=Pe;function we(i,r={}){return(0,a.getEndpoint)(s,"/v2/chains/{chainId}/delegates",{path:{chainId:i},query:r})}e.getDelegates=we;function Me(i){return(0,a.postEndpoint)(s,"/v1/register/notifications",{body:i})}e.registerDevice=Me;function Le(i,r,o){return(0,a.deleteEndpoint)(s,"/v1/chains/{chainId}/notifications/devices/{uuid}/safes/{safe_address}",{path:{chainId:i,safe_address:r,uuid:o}})}e.unregisterSafe=Le;function Be(i,r){return(0,a.deleteEndpoint)(s,"/v1/chains/{chainId}/notifications/devices/{uuid}",{path:{chainId:i,uuid:r}})}e.unregisterDevice=Be;function He(i,r,o,d){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails",{path:{chainId:i,safe_address:r},body:o,headers:d})}e.registerEmail=He;function Ge(i,r,o,d,_){return(0,a.putEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:r,signer:o},body:d,headers:_})}e.changeEmail=Ge;function Ue(i,r,o){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify-resend",{path:{chainId:i,safe_address:r,signer:o},body:""})}e.resendEmailVerificationCode=Ue;function je(i,r,o,d){return(0,a.putEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}/verify",{path:{chainId:i,safe_address:r,signer:o},body:d})}e.verifyEmail=je;function Ve(i,r,o,d){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:r,signer:o},headers:d})}e.getRegisteredEmail=Ve;function We(i,r,o,d){return(0,a.deleteEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/emails/{signer}",{path:{chainId:i,safe_address:r,signer:o},headers:d})}e.deleteRegisteredEmail=We;function ke(i,r,o){return(0,a.postEndpoint)(s,"/v1/chains/{chainId}/safes/{safe_address}/recovery",{path:{chainId:i,safe_address:r},body:o})}e.registerRecoveryModule=ke;function qe(i){return(0,a.deleteEndpoint)(s,"/v1/subscriptions",{query:i})}e.unsubscribeSingle=qe;function Ke(i){return(0,a.deleteEndpoint)(s,"/v1/subscriptions/all",{query:i})}e.unsubscribeAll=Ke;function Fe(i,r){return(0,a.getEndpoint)(s,"/v1/safes",{query:Object.assign(Object.assign({},r),{safes:i.join(",")})})}e.getSafeOverviews=Fe;function Xe(i,r){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/contracts/{contractAddress}",{path:{chainId:i,contractAddress:r}})}e.getContract=Xe;function $e(){return(0,a.getEndpoint)(s,"/v1/auth/nonce",{credentials:"include"})}e.getAuthNonce=$e;function Qe(i){return(0,a.postEndpoint)(s,"/v1/auth/verify",{body:i,credentials:"include"})}e.verifyAuth=Qe;function ze(i){return(0,a.postEndpoint)(s,"/v1/accounts",{body:i,credentials:"include"})}e.createAccount=ze;function Je(i){return(0,a.getEndpoint)(s,"/v1/accounts/{address}",{path:{address:i},credentials:"include"})}e.getAccount=Je;function Ye(i){return(0,a.deleteEndpoint)(s,"/v1/accounts/{address}",{path:{address:i},credentials:"include"})}e.deleteAccount=Ye;function Ze(){return(0,a.getEndpoint)(s,"/v1/accounts/data-types")}e.getAccountDataTypes=Ze;function xe(i){return(0,a.getEndpoint)(s,"/v1/accounts/{address}/data-settings",{path:{address:i},credentials:"include"})}e.getAccountDataSettings=xe;function et(i,r){return(0,a.putEndpoint)(s,"/v1/accounts/{address}/data-settings",{path:{address:i},body:r,credentials:"include"})}e.putAccountDataSettings=et;function tt(i){return(0,a.getEndpoint)(s,"/v1/chains/{chainId}/about/indexing",{path:{chainId:i}})}e.getIndexingStatus=tt})(D);class Gt{constructor(t){this.communicator=t}async getBySafeTxHash(t){if(!t)throw new Error("Invalid safeTxHash");return(await this.communicator.send(g.getTxBySafeTxHash,{safeTxHash:t})).data}async signMessage(t){const n={message:t};return(await this.communicator.send(g.signMessage,n)).data}async signTypedMessage(t){if(!W(t))throw new Error("Invalid typed data");return(await this.communicator.send(g.signTypedMessage,{typedData:t})).data}async send({txs:t,params:n}){if(!t||!t.length)throw new Error("No transactions were passed");const a={txs:t,params:n};return(await this.communicator.send(g.sendTransactions,a)).data}}const T={eth_call:"eth_call",eth_gasPrice:"eth_gasPrice",eth_getLogs:"eth_getLogs",eth_getBalance:"eth_getBalance",eth_getCode:"eth_getCode",eth_getBlockByHash:"eth_getBlockByHash",eth_getBlockByNumber:"eth_getBlockByNumber",eth_getStorageAt:"eth_getStorageAt",eth_getTransactionByHash:"eth_getTransactionByHash",eth_getTransactionReceipt:"eth_getTransactionReceipt",eth_getTransactionCount:"eth_getTransactionCount",eth_estimateGas:"eth_estimateGas",safe_setSettings:"safe_setSettings"},v={defaultBlockParam:(e="latest")=>e,returnFullTxObjectParam:(e=!1)=>e,blockNumberToHex:e=>Number.isInteger(e)?`0x${e.toString(16)}`:e};class Ut{constructor(t){this.communicator=t,this.call=this.buildRequest({call:T.eth_call,formatters:[null,v.defaultBlockParam]}),this.getBalance=this.buildRequest({call:T.eth_getBalance,formatters:[null,v.defaultBlockParam]}),this.getCode=this.buildRequest({call:T.eth_getCode,formatters:[null,v.defaultBlockParam]}),this.getStorageAt=this.buildRequest({call:T.eth_getStorageAt,formatters:[null,v.blockNumberToHex,v.defaultBlockParam]}),this.getPastLogs=this.buildRequest({call:T.eth_getLogs}),this.getBlockByHash=this.buildRequest({call:T.eth_getBlockByHash,formatters:[null,v.returnFullTxObjectParam]}),this.getBlockByNumber=this.buildRequest({call:T.eth_getBlockByNumber,formatters:[v.blockNumberToHex,v.returnFullTxObjectParam]}),this.getTransactionByHash=this.buildRequest({call:T.eth_getTransactionByHash}),this.getTransactionReceipt=this.buildRequest({call:T.eth_getTransactionReceipt}),this.getTransactionCount=this.buildRequest({call:T.eth_getTransactionCount,formatters:[null,v.defaultBlockParam]}),this.getGasPrice=this.buildRequest({call:T.eth_gasPrice}),this.getEstimateGas=n=>this.buildRequest({call:T.eth_estimateGas})([n]),this.setSafeSettings=this.buildRequest({call:T.safe_setSettings})}buildRequest(t){const{call:n,formatters:a}=t;return async c=>{a&&Array.isArray(c)&&a.forEach((l,h)=>{l&&(c[h]=l(c[h]))});const s={call:n,params:c||[]};return(await this.communicator.send(g.rpcCall,s)).data}}}const jt="0x1626ba7e",Vt="0x20c13b0b",j=4001;class b extends Error{constructor(t,n,a){super(t),this.code=n,this.data=a,Object.setPrototypeOf(this,b.prototype)}}class le{constructor(t){this.communicator=t}async getPermissions(){return(await this.communicator.send(g.wallet_getPermissions,void 0)).data}async requestPermissions(t){if(!this.isPermissionRequestValid(t))throw new b("Permissions request is invalid",j);try{return(await this.communicator.send(g.wallet_requestPermissions,t)).data}catch{throw new b("Permissions rejected",j)}}isPermissionRequestValid(t){return t.every(n=>typeof n=="object"?Object.keys(n).every(a=>!!Object.values(w).includes(a)):!1)}}const F=(e,t)=>t.some(n=>n.parentCapability===e),Wt=()=>(e,t,n)=>{const a=n.value;return n.value=async function(){const c=new le(this.communicator);let s=await c.getPermissions();if(F(t,s)||(s=await c.requestPermissions([{[t]:{}}])),!F(t,s))throw new b("Permissions rejected",j);return a.apply(this)},n};var kt=globalThis&&globalThis.__decorate||function(e,t,n,a){var c=arguments.length,s=c<3?t:a===null?a=Object.getOwnPropertyDescriptor(t,n):a,u;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")s=Reflect.decorate(e,t,n,a);else for(var l=e.length-1;l>=0;l--)(u=e[l])&&(s=(c<3?u(s):c>3?u(t,n,s):u(t,n))||s);return c>3&&s&&Object.defineProperty(t,n,s),s};class fe{constructor(t){this.communicator=t}async getChainInfo(){return(await this.communicator.send(g.getChainInfo,void 0)).data}async getInfo(){return(await this.communicator.send(g.getSafeInfo,void 0)).data}async experimental_getBalances({currency:t="usd"}={}){return(await this.communicator.send(g.getSafeBalances,{currency:t})).data}async check1271Signature(t,n="0x"){const a=await this.getInfo(),c=K({abi:[{constant:!1,inputs:[{name:"_dataHash",type:"bytes32"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),s={call:T.eth_call,params:[{to:a.safeAddress,data:c},"latest"]};try{return(await this.communicator.send(g.rpcCall,s)).data.slice(0,10).toLowerCase()===jt}catch{return!1}}async check1271SignatureBytes(t,n="0x"){const a=await this.getInfo(),c=K({abi:[{constant:!1,inputs:[{name:"_data",type:"bytes"},{name:"_signature",type:"bytes"}],name:"isValidSignature",outputs:[{name:"",type:"bytes4"}],payable:!1,stateMutability:"nonpayable",type:"function"}],functionName:"isValidSignature",args:[t,n]}),s={call:T.eth_call,params:[{to:a.safeAddress,data:c},"latest"]};try{return(await this.communicator.send(g.rpcCall,s)).data.slice(0,10).toLowerCase()===Vt}catch{return!1}}calculateMessageHash(t){return St(t)}calculateTypedMessageHash(t){const n=typeof t.domain.chainId=="object"?t.domain.chainId.toNumber():Number(t.domain.chainId);let a=t.primaryType;if(!a){const c=Object.values(t.types),s=Object.keys(t.types).filter(u=>c.every(l=>l.every(({type:h})=>h.replace("[","").replace("]","")!==u)));if(s.length===0||s.length>1)throw new Error("Please specify primaryType");a=s[0]}return gt({message:t.message,domain:{...t.domain,chainId:n,verifyingContract:t.domain.verifyingContract,salt:t.domain.salt},types:t.types,primaryType:a})}async getOffChainSignature(t){return(await this.communicator.send(g.getOffChainSignature,t)).data}async isMessageSigned(t,n="0x"){let a;if(typeof t=="string"&&(a=async()=>{const c=this.calculateMessageHash(t);return await this.isMessageHashSigned(c,n)}),W(t)&&(a=async()=>{const c=this.calculateTypedMessageHash(t);return await this.isMessageHashSigned(c,n)}),a)return await a();throw new Error("Invalid message type")}async isMessageHashSigned(t,n="0x"){const a=[this.check1271Signature.bind(this),this.check1271SignatureBytes.bind(this)];for(const c of a)if(await c(t,n))return!0;return!1}async getEnvironmentInfo(){return(await this.communicator.send(g.getEnvironmentInfo,void 0)).data}async requestAddressBook(){return(await this.communicator.send(g.requestAddressBook,void 0)).data}}kt([Wt()],fe.prototype,"requestAddressBook",null);class qt{constructor(t={}){const{allowedDomains:n=null,debug:a=!1}=t;this.communicator=new Dt(n,a),this.eth=new Ut(this.communicator),this.txs=new Gt(this.communicator),this.safe=new fe(this.communicator),this.wallet=new le(this.communicator)}}const Kt=qt,Xt=Object.freeze(Object.defineProperty({__proto__:null,MessageFormatter:p,get Methods(){return g},Operation:D.Operation,RPC_CALLS:T,get RestrictedMethods(){return w},TokenType:D.TokenType,TransactionStatus:D.TransactionStatus,TransferDirection:D.TransferDirection,default:Kt,getSDKVersion:x,isObjectEIP712TypedData:W},Symbol.toStringTag,{value:"Module"}));export{Xt as e};
